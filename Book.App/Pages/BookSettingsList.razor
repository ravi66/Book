@page "/booksettings"

<PageTitle>@BookName - Settings</PageTitle>

<MudTable Elevation="5"
          Items="@BookSettings"
          @ref="_table"
          Dense="true"
          Hover="true"
          CanCancelEdit="true"
          CommitEditIcon="@Icons.Material.Filled.Save"
          @bind-SelectedItem="selectedBookSetting"
          SortLabel="Sort By"
          RowEditPreview="BackupItem"
          RowEditCancel="ResetItemToOriginalValues"
          IsEditRowSwitchingBlocked="@blockSwitch"
          EditTrigger="TableEditTrigger.EditButton"
          EditButtonPosition="TableEditButtonPosition.Start"
          ApplyButtonPosition="TableApplyButtonPosition.Start"
          RowEditCommit="ItemHasBeenCommitted">
    <ToolBarContent>
        <MudText Typo="Typo.h4">
            <MudIcon Icon="@Icons.Material.Filled.Settings" Color="Color.Primary" /> Settings
        </MudText>
    </ToolBarContent>
    <HeaderContent>
        <MudTh><MudTableSortLabel SortBy="new Func<BookSetting, object>(x=>x.SettingName)">Name</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<BookSetting, object>(x=>x.SettingValue)">Value</MudTableSortLabel></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Setting Name">@context.SettingName</MudTd>
            <MudTd DataLabel="Setting Value">@context.SettingValue</MudTd>
        </RowTemplate>
        <RowEditingTemplate>
            <MudTd DataLabel="Setting Name">@context.SettingName</MudTd>
            <MudTd DataLabel="Setting Value">
                <MudTextField @bind-Value="@context.SettingValue" Required Variant="Variant.Outlined" Margin="Margin.Dense" />
            </MudTd>
        </RowEditingTemplate>
     <EditButtonContent Context="button">
         <MudIconButton Size="@Size.Small"
                        Icon="@Icons.Material.Filled.Edit"
                        Class="pa-0"
                        OnClick="@button.ButtonAction"
                        Color="Color.Primary" />
     </EditButtonContent>
 </MudTable>
