@page "/"

<PageTitle>@BookName - Summary</PageTitle>

<MudContainer Class="pt-0 ps-1" >
    <MudHidden Breakpoint="Breakpoint.SmAndDown" Invert="true" >
        <MudStack Justify="Justify.Center" Row="true" AlignItems="AlignItems.Center" Class="pb-2" >
            <MudTooltip Text="Create Transaction" Color="Color.Primary">
                <MudIconButton Color="Color.Primary"
                               Icon="@Icons.Material.Filled.ReceiptLong"
                               OnClick="AddTransaction"
                               Variant="Variant.Filled" />
            </MudTooltip>
            <MudTooltip Text="Change Year" Color="Color.Primary" >
                <MudSelect Variant="Variant.Outlined"
                       Margin="Margin.Dense"
                       T="int"
                       AnchorOrigin="Origin.BottomCenter"
                       Value="@(Year)"
                       ValueChanged="@(YearChanged)"
                       Dense="true"
                       MaxHeight="500" >
                    @foreach (var year in YearSL)
                    {
                        <MudSelectItem Value="@year" />
                    }
                </MudSelect>
            </MudTooltip>
        </MudStack>
        <MudStack Justify="Justify.Center" Row="true" Class="pb-2" >
            @foreach (var columnInfo in Columns)
            {
                <MudTooltip Text="@columnInfo.MoreInfoToolTip" Color="Color.Primary">
                    <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(e => TotalInfo(columnInfo.InfoText))" Size="Size.Small">@columnInfo.Name</MudButton>
                </MudTooltip>
            }
        </MudStack>
    </MudHidden>

    <MudTable   Dense="true"
                Hover="true"
                Elevation="5"
                Breakpoint="Breakpoint.Sm"
                Items="@MonthlySummaries" >
        <HeaderContent>
            <MudTh>
                <MudTooltip Text="Create Transaction" Color="Color.Primary">
                    <MudIconButton Size="Size.Medium"
                                   Color="Color.Primary"
                                   Icon="@Icons.Material.Filled.ReceiptLong"
                                   OnClick="AddTransaction"
                                   Variant="Variant.Filled" />
                </MudTooltip>
            </MudTh>
            @foreach (var columnInfo in Columns)
            {
                <MudTh Style="text-align:center" >
                    <MudTooltip Text="@columnInfo.MoreInfoToolTip" Color="Color.Primary">
                        <MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="@(e => TotalInfo(columnInfo.InfoText))" Size="Size.Small">@columnInfo.Name</MudButton>
                    </MudTooltip>
                </MudTh>
            }
            <MudTh Style="text-align:center; " >
                <MudTooltip Text="Change Year" Color="Color.Primary">
                    <MudSelect Variant="Variant.Outlined"
                            Margin="Margin.Dense"
                            T="int"
                            AnchorOrigin="Origin.BottomCenter"
                            Value="@(Year)"
                            ValueChanged="@(YearChanged)"
                            Dense="true"
                            MaxHeight="500" >
                        @foreach (var year in YearSL)
                        {
                            <MudSelectItem Value="@year" />
                        }
                    </MudSelect>
                </MudTooltip>
            </MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Month"><MudText>@context.MonthName</MudText></MudTd>
            @foreach (var summary in context.SummaryDetails)
            {
                <MudTd Style="text-align:center" DataLabel="@summary.SummaryName">
                    <MudLink Href="javascript: void(0);" OnClick="(e => TransList(summary.SummaryName, summary.Types, context.MonthNo))" Class="@summary.CssClass">@summary.Total.ToString("N2")</MudLink>
                </MudTd>
            }
        </RowTemplate>
    </MudTable>
    
</MudContainer>

